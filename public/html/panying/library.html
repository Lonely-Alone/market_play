<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
<title>个人馆</title>
<link rel="stylesheet" href="../../css/main.css">
</head>
<body class="bge5">
  <div class="p1 rel">
    <span class="qa_search pct85">
      <a  class="pl1" href="#"><i class="i i_search"></i></a>
      <input class="input pct85" type="text" placeholder="搜索商品"/>
    </span>
    <a class="sort_select" id="sortSelectBtn" href="#">
      <i class="i_15 i_sort"></i>
      <p>分类</p>
    </a>
    <div class="sort_select_box rel dn">
      <ul class="sort_select_list">
        <li>
          <a href="#">手机</a>
        </li> 
        <li>
          <a href="#">平板</a>
        </li>
        <li>
          <a href="#">笔记本</a>
        </li>
        <li>
          <a href="#">其他</a>
        </li>
      </ul>
      <span class="sort_cor sort_corc"></span>
      <span class="sort_cor sort_corwh"></span> 
    </div>
  </div>
  <div class="slide_area">
    <ul id="slideImg" class="slide_list">
        <li><a href="#"><img width="100%" src="../../img/temp/p4.jpg"/></a></li>
        <li><a href="#"><img width="100%" src="../../img/temp/p5.jpg"/></a></li>
        <li><a href="#"><img width="100%" src="../../img/temp/p2.jpg"/></a></li>
    </ul>
    <ul id="slideMod" class="action"> 
      <li class="mod current" data="0"></li>  
        <li class="mod" data="1"></li>    
        <li class="mod" data="2"></li>    
    </ul>
  </div>
  <div class="library_product_area fix">
    <div class="library_product_box mr05">
      <a href="#"><img width="100%" height="150" src="../../img/goods/g2.jpg"/></a>
      <div class="p05">
          <div class="pro_title">产品名称产品名称产品名称产品名称</div> 
          <div class="fix">
            <span class="mt05 cfb f14 b l">&yen;688</span>  
            <a href="#"><i class="i i_add_cart r"></i></a>     
          </div>
        </div>
      </div>
    <div class="library_product_box">
      <a href="#"><img width="100%" height="150" src="../../img/goods/g3.jpg"/></a>
      <div class="p05">
        <div class="pro_title">产品名称产品名称</div>  
        <div class="fix">
          <span class="mt05 cfb f14 b l">&yen;688</span>  
          <a href="#"><i class="i i_add_cart r"></i></a>           
        </div>
      </div>
    </div>
  </div>
  <div class="library_product_area fix">
    <div class="library_product_box mr05">
      <a href="#"><img width="100%" height="150" src="../../img/goods/g2.jpg"/></a>
      <div class="p05">
          <div class="pro_title">产品名称产品名称产品名称产品名称</div> 
          <div class="fix">
            <span class="mt05 cfb f14 b l">&yen;688</span>  
            <a href="#"><i class="i i_add_cart r"></i></a>     
          </div>
        </div>
      </div>
    <div class="library_product_box">
      <a href="#"><img width="100%" height="150" src="../../img/goods/g3.jpg"/></a>
      <div class="p05">
        <div class="pro_title">产品名称产品名</div>  
        <div class="fix">
          <span class="mt05 cfb f14 b l">&yen;688</span>  
          <a href="#"><i class="i i_add_cart r"></i></a>           
        </div>
      </div>
    </div>
  </div>
  <div class="library_business_info">
    <p>地址：浙江省宁波市鄞州区南部商务区迪趣大厦18楼</p>
    <p>
      联系电话：0574-289000000
      <span class="ml05">营业时间:  08:30-17:00</span>
    </p> 
  </div>
  <a class="settle_cart"><i class="i i_cart_l"></i></a>
<script src="../../js/min/mootools.1.4.0.js"></script>
<script type="text/javascript">
$$('#sortSelectBtn').addEvent('click',function(){
  $$('.sort_select_box').removeClass('dn');
})
//返回角度
function GetSlideAngle(dx, dy) {
    return Math.atan2(dy, dx) * 180 / Math.PI;
}
//根据起点和终点返回方向 1：向上，2：向下，3：向左，4：向右,0：未滑动
function GetSlideDirection(startX, startY, endX, endY) {
    var dy = startY - endY;
    var dx = endX - startX;
    var result = 0; 
    //如果滑动距离太短
    if (Math.abs(dx) < 2 && Math.abs(dy) < 2) {
        return result;
    } 
    var angle = GetSlideAngle(dx, dy);
    if (angle >= -45 && angle < 45) {
        result = 4;
    } else if (angle >= 45 && angle < 135) {
        result = 1;
    } else if (angle >= -135 && angle < -45) {
        result = 2;
    }
    else if ((angle >= 135 && angle <= 180) || (angle >= -180 && angle < -135)) {
        result = 3;
    }
    return result;
}
var w=$(window).getWidth();
$$('.slide_area').setStyle('width',w);
$$('#slideImg li').setStyle('width',w);
slideSwitch(); 
function slideSwitch(){
  var slideImglist=document.querySelectorAll('#slideImg li'),slideModlist=document.querySelectorAll('#slideMod li');
  var num=slideImglist.length;
  var Index=0,slideInter;
  var autoSlide=function(){
    slideInter=setInterval(function(){
      slideShow(Index);   
      Index++;      
      if(Index==num){
        Index=0;
      } 
    },1500);
  }
  var slideShow = function(Index){
	  $('slideImg').style.left =-w*Index+'px';
	  $('slideImg').style.webkitTransition ='left 0.4s ease-out';
	//  $("slideImg").stop(true,false).animate({left:-w*Index},400);
      $$('#slideMod li').removeClass("current");
      $$(slideModlist[Index]).addClass("current");
  }
  for(var i=0; i<slideImglist.length;i++){
      slideImglist[i]._index=i;
      slideImglist[i].addEventListener('touchstart', function (event) {
        clearInterval(slideInter);
        startX = event.touches[0].pageX;
        startY = event.touches[0].pageY;
      }, false);
      slideImglist[i].addEventListener('touchend', function (event) {
    	clearInterval(slideInter);
        var endX = event.changedTouches[0].pageX;
        var endY = event.changedTouches[0].pageY;
        var direction = GetSlideDirection(startX,startY,endX,endY);
        var index=this._index;
        switch (direction) {
            case 3:  
              if(index==(num-1)){
            	 $('slideImg').style.left=0+'px';
            	 $('slideImg').style.webkitTransition ='left 0.05s ease-out';
             //  $("#slideImg").stop(true,false).animate({left:0},50); 
                $$('#slideMod li').removeClass("current"); 
                $$(slideModlist[0]).addClass("current")
              }else{	  
            	  var currentleft=parseInt($('slideImg').offsetLeft);
            	  $('slideImg').style.left=currentleft-w+'px';
            	  $('slideImg').style.webkitTransition ='left 0.4s ease-out';
              //   $("#slideImg").stop(true,false).animate({left:'-='+w},50);
                 $$('#slideMod li').removeClass("current");
                 $$(slideModlist[index+1]).addClass("current");  
              }
              break;
            case 4: 
              if(index==0){
            	 $('slideImg').style.left=-w*(num-1)+'px';
            	 $('slideImg').style.webkitTransition ='left 0.4s ease-out';
               //  $("#slideImg").stop(true,false).animate({left:-w*(num-1)},50);
               //   slideMod.removeClass("current").eq(num-1).addClass("current");
                 $$('#slideMod li').removeClass("current");
                 $$(slideModlist[num-1]).addClass("current"); 
              }else{
            	  var currentleft=parseInt($('slideImg').offsetLeft);
            	  $('slideImg').style.left=currentleft+w+'px';
            	  $('slideImg').style.webkitTransition ='left 0.4s ease-out';
                //$("#slideImg").stop(true,false).animate({left:'+='+w},50); 
                  $$('#slideMod li').removeClass("current");
                  $$(slideModlist[index-1]).addClass("current"); 
              } 
              break;
            default:           
        } 
        autoSlide();  
      }, false);
  }
 autoSlide();   
}
</script>
</body>
</html>